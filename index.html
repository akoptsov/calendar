<!DOCTYPE html>
<html>
	<head>
		<title>Календарь</title>
		<link type="text/css" rel="stylesheet" href="index.css" />
	</head>
	<body>
		<aside class="controls">
			<label class="control">
				<span class="contol__label">Месяц</span>
				<select id="month__value" class="contol__value">
				</select>
			</label>
			<label class="control">
				<select id="year__value" class="contol__value">
				</select>
			</label>
			<span class="controls__icon"></span>
		</aside>
		<main class="wrapper">
			<header>
				<h2 id="header" class="header"></h2>
			</header>
			<article id="container" class="container"></article>
		</main>
		<script>
			var DOTW = [
				'sunday',
				'monday',
				'tuesday',
				'wednesday',
				'thirsday',
				'friday',
				'saturday'
			];

			var MONTH = [
				'Январь',
				'Февраль',
				'Март',
				'Апрель',
				'Май',
				'Июнь',
				'Июль',
				'Август',
				'Сентябрь',
				'Октябрь',
				'Ноябрь',
				'Декабрь'
			];

			var document = window.document;
			var now = new Date();
			var month = now.getMonth();
			var year = now.getFullYear();

			var YEAR = [year - 1, year, year + 1, year + 2];

			var setMonth = document.getElementById('month__value');
			initMonthSelector(setMonth, month);
			setMonth.addEventListener('change', onMonthChange);

			var setYear = document.getElementById('year__value');
			initYearSelector(setYear, year);
			setYear.addEventListener('change', onYearChange);


			render(document, year, month);

			function render (document, year, month) {
				var container = document.getElementById('container');
				var header = document.getElementById('header');

				var day = 1;
				var date = new Date(year, month, day);
				var elem;

				header.textContent = MONTH[month] + ' ' + year;

				while (date.getMonth() === month) {
					elem = document.createElement('div');
					elem.textContent = day;
					elem.className = 'day ' + DOTW[date.getDay()];
					container.appendChild(elem);

					day += 1;
					date = new Date(year, month, day);
				}
			}

			function initMonthSelector(selector, selectedIndex) {
			MONTH.forEach(function (name, index) {
					selector.appendChild(
						createSelectOption(
							name, 
							index, 
							index === selectedIndex
						)
					);
				});
				}

			function initYearSelector(selector, selectedIndex) {
				YEAR.forEach(function (name, index) {
					selector.appendChild(
						createSelectOption(
							name, 
							name, 
							name === selectedIndex
						)
					);
			});
			}

			function onMonthChange(e) {
				month = Number(this.value);
				updateCalendar();
			}

			function onYearChange(e) {
				year = Number(this.value);
				updateCalendar();
			}

			function createSelectOption(label, value, selected) {
				var option = document.createElement('option');
				option.value = value;
				option.textContent = label;

				if (selected) {
					option.selected = true;
				}

				return option;
			}

			function updateCalendar() {
				var container = document.getElementById('container');
				container.innerHTML = '';

				render(document, year, month);
			}

		</script>
	</body>
</html>